{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}
{% block title %}{{ room.name }}{% endblock %}
{% block app_content %}
<div class="h1 p-3" align="center">{{ room.name }}</div>
<div class="border border-dark-subtle border-bottom-0 rounded">
    <div id="messages" style="overflow-y: auto; height: 80vh; width: 100%;">
        <ul class="list-group">
            {% for message in messages %}
            {% if message.user_id == current_user %}
            <li class="list-group-item d-flex justify-content-between align-items-start p-2 w-100" style="background-color: rgb(227, 227, 227);">
                {% include '_message.html' %}
            </li>
            {% else %}
            <li class="list-group-item d-flex justify-content-between align-items-start p-2 w-100 bg-light">
                {% include '_message.html' %}
            </li>
            {% endif %}
            {% endfor %}
        </ul>
    </div>
    <div class="col-lg-6">
        <div class="input-group">
            <input type="text" id="user_message" class="form-control" placeholder="Message">
            <span class="input-group-btn">
                <button class="btn btn-default" id="send_message" type="button">Send</button>
            </span>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"
    integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA=="
    crossorigin="anonymous"></script>

<script type="text/javascript">
    const username = `{{ username }}`
    const roomname = `{{ roomname }}`
</script>

<script src="{{ url_for('static', filename='scripts/socketio.js')}}"></script>

{% endblock %}
